<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Daniel & Michelle üíô</title>
<style>
body {
  margin: 0;
  overflow: hidden;
  font-family: 'Courier New', monospace;
  background: radial-gradient(circle at bottom, #0f2027, #203a43, #2c5364);
  color: white;
}
#startScreen {
  position: fixed; inset: 0;
  background: #0d1117;
  display: flex; justify-content: center; align-items: center;
  z-index: 10;
}
#startBtn {
  padding: 18px 32px;
  font-size: 20px;
  border: none; border-radius: 35px;
  background: #ff5c8a; color: white;
  cursor: pointer;
  box-shadow: 0 0 20px rgba(255,92,138,0.7);
}
#ui {
  position: absolute;
  top: 15px; left: 50%;
  transform: translateX(-50%);
  background: rgba(0,0,0,0.5);
  padding: 12px 20px;
  border-radius: 15px;
  z-index: 2;
  text-align: center;
}
#timer { font-size: 16px; }

#subtitle {
  position: absolute;
  bottom: 90px;
  width: 100%;
  text-align: center;
  font-size: 18px;
  font-family: Arial, sans-serif;
  color: #ffd1dc;
  text-shadow: 0 0 10px #ff5c8a;
  z-index: 3;
  padding: 0 15px;
  opacity: 0;
  transform: scale(0.9);
  transition: opacity 2s ease, transform 2s ease;
}
#subtitle.final {
  opacity: 1;
  transform: scale(1.05);
}

canvas { position:absolute; inset:0; z-index:1; }
</style>
</head>
<body>

<div id="startScreen">
  <button id="startBtn">üíå √Åbreme</button>
</div>

<div id="ui">
  <div><strong>Daniel ‚ù§Ô∏è Michelle</strong></div>
  <div id="timer"></div>
</div>

<div id="subtitle"></div>

<iframe id="music" width="0" height="0"
  src="https://www.youtube.com/embed/1_iUABH9D3c?enablejsapi=1"
  frameborder="0" allow="autoplay"></iframe>

<canvas id="canvas"></canvas>

<script>
// BOT√ìN
const startBtn = document.getElementById("startBtn");
const startScreen = document.getElementById("startScreen");
const iframe = document.getElementById("music");
startBtn.onclick = () => {
  startScreen.style.display = "none";
  iframe.src += "&autoplay=1";
  startSubtitles();
};

// TIMER
const startDate = new Date("2018-12-23T00:00:00");
function updateTimer(){
  const now = new Date();
  let diff = now - startDate;
  let days = Math.floor(diff / (1000*60*60*24));
  let years = Math.floor(days/365);
  let months = Math.floor((days%365)/30);
  let remDays = days - (years*365 + months*30);
  document.getElementById("timer").textContent =
   `Desde 23/12/2018: ${years} a√±os, ${months} meses, ${remDays} d√≠as üíô`;
}
setInterval(updateTimer,1000); updateTimer();

// SUBT√çTULOS
const subtitles = [
 {t:0,  text:"Desde que llegaste, mis ojos solo saben buscarte a ti‚Ä¶"},
 {t:8,  text:"Todo cambi√≥ cuando tu sonrisa se cruz√≥ con mi destino."},
 {t:16, text:"En ti encontr√© calma, amor y un hogar."},
 {t:24, text:"Tus manos son mi lugar seguro."},
 {t:32, text:"Mi mundo tiene sentido desde que est√°s en √©l."},
 {t:40, text:"No hay d√≠a que no agradezca por haberte encontrado."},
 {t:48, text:"Mi coraz√≥n te eligi√≥‚Ä¶ y lo har√° siempre."},
 {t:56, text:"Mi Cuchurrumina, por siempre contigo. ‚Äî Tu Cuchurrimun"}
];

let finalMoment = false;

function startSubtitles(){
  const sub = document.getElementById("subtitle");
  let i=0;
  const startTime = Date.now();
  setInterval(()=>{
    const elapsed = (Date.now()-startTime)/1000;
    if(i<subtitles.length && elapsed>=subtitles[i].t){
      sub.textContent = subtitles[i].text;
      if(i === subtitles.length-1){
        sub.classList.add("final");
        finalMoment = true;
      } else {
        sub.classList.remove("final");
        sub.style.opacity = 1;
      }
      i++;
    }
  },500);
}

// √ÅRBOL + CORAZONES
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");

function resize(){
  canvas.width = innerWidth;
  canvas.height = innerHeight;
}
resize(); addEventListener("resize",resize);

let growth = 0;
let hearts = [];

function drawTree(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  ctx.strokeStyle="#6b4f3f"; ctx.lineWidth=10;
  ctx.beginPath();
  ctx.moveTo(canvas.width/2, canvas.height);
  ctx.lineTo(canvas.width/2, canvas.height - growth);
  ctx.stroke();

  if(growth>120){
    ctx.lineWidth=5;
    ctx.beginPath();
    ctx.moveTo(canvas.width/2, canvas.height-120);
    ctx.lineTo(canvas.width/2-60, canvas.height-220);
    ctx.moveTo(canvas.width/2, canvas.height-140);
    ctx.lineTo(canvas.width/2+70, canvas.height-230);
    ctx.stroke();
  }
}

function addHeart(){
  hearts.push({
    x: canvas.width/2 + Math.random()*160-80,
    y: canvas.height-260 - Math.random()*100,
    v: Math.random()*0.35+0.2
  });
}

function drawHearts(){
  hearts.forEach(h=>{
    ctx.fillStyle="#ff5c8a";
    ctx.beginPath();
    ctx.moveTo(h.x,h.y);
    ctx.bezierCurveTo(h.x-4,h.y-4,h.x-12,h.y+4,h.x,h.y+12);
    ctx.bezierCurveTo(h.x+12,h.y+4,h.x+4,h.y-4,h.x,h.y);
    ctx.fill();
    h.y-=h.v;
  });
}

function animate(){
  if(growth<230) growth+=0.4;
  drawTree();
  if(growth>170 && Math.random() < (finalMoment ? 0.25 : 0.05)) addHeart();
  drawHearts();
  requestAnimationFrame(animate);
}
animate();
</script>

</body>
</html>
